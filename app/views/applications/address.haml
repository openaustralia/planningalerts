- if @error
  #warning= @error
- form_tag({}, :method => :get) do
  %ul#ulSignup.form.nobullets
    %li#liAddress
      = label_tag(:q, 'Enter a street address')
      = text_field_tag(:q, @q, :class => (@error ? "textbox error" : "textbox"))
      %small e.g. 1 Sowerby St, Goulburn, NSW 2580
    = submit_tag "Search", :class => "button", :name => nil
- if @q
  - unless @other_addresses.empty?
    %p Or did you want?
    %ul
      - @other_addresses.each do |a|
        %li
          = link_to a, :q => a

  - unless @error
    %hr
    - if @applications.empty?
      %p
        Unfortunately, we don't know of any applications near #{@q}.
        This is most likely because we haven't yet been able to add your local planning authority.
        There is a list of the planning authorities we currently cover
        #{link_to "here", about_path(:anchor => "authorities")}. We're working on covering the whole country but we're not there yet.
      %p
        To see an example of what the results would look like once your area is included see #{link_to "Bourke Street in Melbourne", address_applications_path(:q => "Bourke St, Melbourne 3000")}.
        
      .attention
        <span class="highlight">You can help</span>! <a href="http://www.openaustraliafoundation.org.au/donate/"><span class="highlight">Donate</span> to the OpenAustralia Foundation</a> which will allow us to add more local authorities, including yours!
        Or, if you're a programmer you can help directly by #{link_to "writing a screen scraper", get_involved_path}.
    - else
      %p
        =link_to "Email me whenever there is new application near #{@q}", signup_url(:alert => {:address => @q})
        (No more than once per day)
      %h3 Recent applications within #{meters_in_words(@radius)} of #{@q}
      - paginated_section @applications, :previous_label => "« Newer", :next_label => "Older »" do
        %dl= render :partial => "application", :collection => @applications
