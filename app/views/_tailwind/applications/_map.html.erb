<%# TODO: Use the new library loader for google maps. Might make this a little less ugly %>
<%# TODO: Show static map and pano when javascript is disabled %>
<% if application.location %>
  <div class="flex justify-between">
    <div x-data
          x-init="initialiseBasicMapWithMarker2($refs.map)"
          class="w-full xl:w-[528px] sm:h-[528px] aspect-1 h-auto">
      <%= tag.div class: "bg-google-maps-green w-full h-full",
                  data: { lat: application.lat, lng: application.lng, address: application.address, zoom: 16 },
                  "x-ref" => "map" do %>
        <noscript><%= google_static_map(application, size: "528x528") %></noscript>
      <% end %>
    </div>
    <%# TODO: Don't show pano if there's no useful streetview available %>
    <div x-data
        x-init="initialisePano2($refs.pano)"
        class="hidden xl:block w-[528px] h-[528px]">
      <%= tag.div class: "w-full h-full",
                  data: { lat: application.lat, lng: application.lng, address: application.address },
                  "x-ref" => "pano" do %>
        <%# TODO: The no javascript version of streetview isn't working for some reason %>
        <noscript><%= google_static_streetview(application, size: "528x528") %></noscript>
      <% end %>
    </div>
  </div>
<% end %>

<%
=begin
%>

- if application.location
  -# If just showing the map make it twice as wide
  .application#map_div{ { "data-lat": application.lat, "data-lng": application.lng, "data-address": application.address, "data-zoom": 16 }, class: ("double" if Flipper.enabled?(:disable_streetview_in_app, current_user)) }
    %noscript= google_static_map(application, size: "350x330")

  - unless Flipper.enabled?(:disable_streetview_in_app, current_user)
    .details
      #pano{ data: { lat: application.lat, lng: application.lng, address: application.address } }
        %noscript= google_static_streetview(application, size: "350x330")

<%
=end
%>
