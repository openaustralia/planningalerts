#map_div(style="width:330px;height:330px")
:javascript
  var map;
  window.onload = addCodeToFunction(window.onload,function() {
    map = new Mapstraction("map_div","google");
    map.setCenterAndZoom(new LatLonPoint(#{@alert.lat},#{@alert.lng}),14);
    map.addSmallControls();
  });

%p
  What size area near #{@alert.address} would you like to receive alerts for?

- form_tag do
  %ul.nobullets
    %li
      = radio_button_tag(:size, "s", @size == "s", :onclick => draw_box_javascript('s'))
      = label_tag(:size_s, "My street (about #{meters_in_words(@zone_sizes['s'])})")
    %li
      = radio_button_tag(:size, "m", @size == "m", :onclick => draw_box_javascript('m'))
      = label_tag(:size_m, "My neighbourhood (about #{meters_in_words(@zone_sizes['m'])})")
    %li
      = radio_button_tag(:size, "l", @size == "l", :onclick => draw_box_javascript('l'))
      = label_tag(:size_l, "My suburb (about #{meters_in_words(@zone_sizes['l'])})")
    %noscript
      %li
        Note: viewing the alert area on a map requires javascript
    
  %p
    = submit_tag("Update size >>", :class => "button")

= javascript_include_tag "preview"
= javascript_tag "window.onload = addCodeToFunction(window.onload,function() {#{draw_box_javascript(@size)}});"